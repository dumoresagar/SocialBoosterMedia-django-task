<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Items Dashboard</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

  <!-- Header -->
  <header class="bg-indigo-600 shadow-lg">
    <div class="max-w-7xl mx-auto py-4 px-6">
      <h1 class="text-3xl font-bold text-white">ðŸ“Š Items Dashboard</h1>
      <p class="text-indigo-200">Visualizing item values and API usage</p>
    </div>
  </header>

  <!-- Main container -->
  <main class="max-w-7xl mx-auto py-8 px-6">
    <!-- Chart Card -->
    <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Items by Value Range</h2>
      <canvas id="myChart" class="w-full h-64"></canvas>
    </div>

    <!-- API Endpoints Card -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <h2 class="text-xl font-semibold text-gray-700 mb-4">Available API Endpoints</h2>
      <ul class="list-disc pl-6 text-gray-600 space-y-1">
        <li><code class="text-indigo-600 font-mono">GET /api/items/</code> â€“ List items</li>
        <li><code class="text-indigo-600 font-mono">POST /api/items/</code> â€“ Create item</li>
        <li><code class="text-indigo-600 font-mono">GET /api/items/&lt;id&gt;/</code> â€“ Retrieve item</li>
        <li><code class="text-indigo-600 font-mono">PUT /api/items/&lt;id&gt;/</code> â€“ Update item</li>
        <li><code class="text-indigo-600 font-mono">DELETE /api/items/&lt;id&gt;/</code> â€“ Delete item</li>
        <li><code class="text-indigo-600 font-mono">GET /api/import-posts/</code> â€“ Import posts from JSONPlaceholder</li>
      </ul>
    </div>
  </main>

  <!-- Chart.js Script -->
  <script>
    const buckets = {{ buckets|safe }};
    const labels = Object.keys(buckets);
    const values = Object.values(buckets);

    const ctx = document.getElementById('myChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'Items per Value Range',
          data: values,
          backgroundColor: [
            'rgba(99, 102, 241, 0.7)',
            'rgba(34, 197, 94, 0.7)',
            'rgba(251, 191, 36, 0.7)',
            'rgba(239, 68, 68, 0.7)'
          ],
          borderColor: [
            'rgba(99, 102, 241, 1)',
            'rgba(34, 197, 94, 1)',
            'rgba(251, 191, 36, 1)',
            'rgba(239, 68, 68, 1)'
          ],
          borderWidth: 2,
          borderRadius: 6
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: { stepSize: 1 }
          }
        }
      }
    });
  </script>

</body>
</html>
